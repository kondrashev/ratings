name: Deploy React Application

on:
  push:
    branches: [main]
    paths-ignore:
      - ".github/**"

  workflow_dispatch:

  jobs:
    build:
      runs-on: ubuntu-latest
      steps:
        - uses: actions/checkout@v3
        - name: Install dependecies
          run: npm ci
        - name: Create build
          run: npm run all

    deploy:
      runs-on: ubuntu-latest
      needs: build
      steps:
        - name: heroku login
          run: login
        - name: Deploy to Heroku
          run: git push heroku main
